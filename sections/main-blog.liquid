{%- paginate blog.articles by 12 -%}
<section class="section-spacing">
  <div class="page-width">
    <div class="page-header">
      <h1 class="h1">{{ blog.title }}</h1>
    </div>

    {%- if blog.articles.size > 0 -%}
      <div class="blog-grid">
        {%- for article in blog.articles -%}
          <article class="blog-card">
            {%- if article.image -%}
              <div class="blog-card__media">
                <a href="{{ article.url }}">
                  <img
                    src="{{ article.image | image_url: width: 800 }}"
                    alt="{{ article.image.alt | escape | default: article.title | escape }}"
                    loading="lazy"
                    decoding="async"
                    width="400"
                    height="250"
                  >
                </a>
              </div>
            {%- endif -%}

            <div class="blog-card__content">
              <time class="blog-card__date" datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
                {{ article.published_at | date: '%B %d, %Y' }}
              </time>
              <h2 class="blog-card__title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h2>
              {%- if article.excerpt_or_content != blank -%}
                <p class="blog-card__excerpt">{{ article.excerpt_or_content | strip_html | truncate: 120 }}</p>
              {%- endif -%}
            </div>
          </article>
        {%- endfor -%}
      </div>

      {%- if paginate.pages > 1 -%}
        <nav class="pagination" aria-label="Pagination">
          {%- if paginate.previous -%}
            <a href="{{ paginate.previous.url }}" class="pagination__item" aria-label="Previous">
              {% render 'icon-arrow', direction: 'left' %}
            </a>
          {%- endif -%}

          {%- for part in paginate.parts -%}
            {%- if part.is_link -%}
              <a href="{{ part.url }}" class="pagination__item">{{ part.title }}</a>
            {%- else -%}
              {%- if part.title == paginate.current_page -%}
                <span class="pagination__item is-current" aria-current="page">{{ part.title }}</span>
              {%- else -%}
                <span class="pagination__item">{{ part.title }}</span>
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}

          {%- if paginate.next -%}
            <a href="{{ paginate.next.url }}" class="pagination__item" aria-label="Next">
              {% render 'icon-arrow', direction: 'right' %}
            </a>
          {%- endif -%}
        </nav>
      {%- endif -%}
    {%- endif -%}
  </div>
</section>
{%- endpaginate -%}

{% schema %}
{
  "name": "Blog",
  "tag": "section",
  "class": "main-blog-section",
  "settings": []
}
{% endschema %}
